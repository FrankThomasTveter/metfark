<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" href="favicon.ico" type="image/x-icon"/>
    <meta charset="UTF-8">
    <title>File ARchive Kit</title>
    <link  rel="stylesheet" href="css/fark.css" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </head>
  <body onLoad="onload()">
    <div class="container">
      <h1 style="color:#09C;">File ARchive Kit</h1>
      <ul class="nav nav-pills">
	<li id="model_tab" class="active" title="Configure model file index (NetCDF)"><a data-toggle="pill" href="#model">Model</a></li>
	<li id="obs_tab" title="Configure observation file index (BUFR)"><a data-toggle="pill" href="#obs">Observation</a></li>
	<li id="scan_tab" title="Make model and observation file indexes."><a data-toggle="pill" href="#scan">Scan</a></li>
	<li id="coloc_tab" title="Colocate data using model and observation file indexes."><a data-toggle="pill" href="#coloc">Colocate</a></li>
      </ul>
      <div class="tab-content">
	<div id="model" class="tab-pane fade in active">
	  <table style="width:100%">
	    <tr style="background:#09C;">
	      <td>
		<div id="farkheader">
		  <button class="request" style="width:100%" onclick="model_updateData()" title="Re-load from server."><h1>Model index setup</h1></button>
		</div>
	      </td>
	    </tr>
	  </table>
	  <table>
	    <tr>
	      <td style="white-space: nowrap;"><em>Model index setup file:</em></td>
	      <td class="fill" width="100%">
		<input id="modelConfigFile" type="text" value="" style="width:100%" onblur="model_setConfigFile(this.value);model_show()"/> 
		<div id="modelConfigFileDropdown" class="dropdown-content">
		</div>
	      </td>
	      <td><button onclick="showDropdown('modelConfigFile')" class="dropbtn">&#9906</button></td>
	      <td></td>
	      <td></td>
	    </tr>
	    <tr>
	      <td>Model file top directory:</td>
	      <td class="fill" colspan="3"><input id="modelFileFilterDir" type="text" value="" style="width:100%" onblur="model_setArray('fileFilterDir',this.value)"/> </td>
	    </tr>
	    <tr>
	      <td>Model file filter (regexp):</td>
	      <td class="fill">
		<input id="modelFileFilter" type="text" value="" style="width:100%" onblur="model_setArray('fileFilter',this.value)"/> 
		<div id="modelFileFilterDropdown" class="dropdown-content"></div>
	      </td>
	      <td><button onclick="model_patternFind('modelFileFilter')" class="dropbtn">&#8594</button></td>
	      <td>Files:</td>
	      <td id="modelPatternHits">?</td>
	    </tr>
	    <tr>
	      <td>Model index variable:</td>
	      <td class="fill"><input style="color:blue" id="modelIndexVariable" type="text" value="" style="width:100%" onblur="model_setArray('index',this.value)"/>
		<div id="modelIndexDropdown" class="dropdown-content">
		</div>
	      </td>
	      <td><button onclick="showDropdown('modelIndex')" class="dropbtn">&#9906</button></td>
	    </tr>
	  </table>
	  <table style="width:100%">
	    <tr>
	      <td align="right">Password:<input type="password" id="modelConfigFilePsw" value="">
		<button onclick="model_saveConfigFile()">Save</button></td>
	    </tr>
	  </table>
	</div>
	<div id="obs" class="tab-pane fade in">
	  <table style="width:100%">
	    <tr style="background:#09C;">
	      <td>
		<div id="farkheader">
		  <button style="width:100%" class="request" onclick="obs_updateData()" title="Re-load from server."><h1>Observation index setup</h1></button>
		</div>
	      </td>
	    </tr>
	  </table>
	  <table style="width:100%">
	    <tr>
	      <td style="white-space: nowrap;"><em>Observation index setup file:</em></td>
	      <td class="fill" width="100%"><input id="obsConfigFile" type="text" value="" style="width:100%" onblur="obs_setConfigFile(this.value);obs_show()"/> 
		<div id="obsConfigFileDropdown" class="dropdown-content">
		</div>
	      </td>
	      <td><button onclick="showDropdown('obsConfigFile')" class="dropbtn">&#9906</button></td>
	      <td></td>
	      <td></td>
	    </tr>
	    <tr>
	      <td>Search top directory:</td>
	      <td class="fill" colspan="3"><input id="obsFileFilterDir" type="text" value="" style="width:100%" onblur="obs_setArray('fileFilterDir',this.value)"/> </td>
	    </tr>
	    <tr>
	      <td>File filter (regexp):</td>
	      <td class="fill">
		<input id="obsFileFilter" type="text" value="" style="width:100%" onblur="obs_setArray('fileFilter',this.value)"/> 
		<div id="obsFileFilterDropdown" class="dropdown-content"></div>
	      </td>
	      <td><button onclick="obs_patternFind('obsFileFilter')" class="dropbtn">&#8594</button></td>
	      <td>Files:</td>
	      <td id="obsPatternHits">?</td>
	    </tr>
	    <tr>
	      <td>BUFR table path:</td>
	      <td class="fill" colspan="3"><input id="obsTablePath" type="text" value="" style="width:100%" onblur="obs_setArray('tablePath',this.value)"/> </td>
	    </tr>
	    <tr>
	      <td>Data filter</td>
	      <td colspan="3">
		<table width="100%" border="0" id="obsFilterTable">
		  <tr>
		    <td align="right">BUFR type:</td>
		    <td class="fill">
		      <input id="obsBufrType" type="text" value="" style="width:100%" onblur="obs_setArray('bufrType',this.value)"/> 
		      <div id="obsBufrTypeDropdown" class="dropdown-content"></div>
		    </td>
		    <td style="min-width:25px;width:25px"><button onclick="showDropdown('obsBufrType')" class="dropbtn">&#9906</button></td>
		    <td align="right">Sub type:</td>
		    <td class="fill">
		      <input id="obsSubType" type="text" value="" style="width:100%" onblur="this.value=this.value.replace(/[^\d]/g,'');obs_setArray('subType',this.value)"/> 
		      <div id="obsSubTypeDropdown" class="dropdown-content"></div>
		    </td>
		    <td style="min-width:25px;width:25px"><button onclick="showDropdown('obsSubType')" class="dropbtn">&#9906</button></td>
		    <td align="right">Info:</td>
		    <td class="fill">
		      <input id="obsTypeInfo" type="text" value="" style="width:100%" onblur="obs_setArray('typeInfo',this.value)"/> 
		    </td>
		  </tr>
		</table>
	      </td>
	    </tr>
	    <tr id="displayObsIndexTargets"><td valign="top">Observation targets:</td>
	      <td colspan="3">
		<table width="100%" border="1" id="obsIndexTargetTable">
		  <tr style="background-color:#00b9f2" id="labelsObsIndexTarget"> 
		    <td style="min-width:25px;width:25px"></td>
		    <td><bf>Observation target</bf></td>
		    <td width="150px"><bf>Position</bf></td>
		    <td style="min-width:25px;width:25px"></td>
		    <td width="100px"><bf>Descriptor</bf></td>
		    <td width="200px"><bf>Info</bf></td>
		    <td width="150px"><bf>Minimum</bf></td>
		    <td width="150px"><bf>Maximum</bf></td>
		  </tr>
		  <tr id="newlineObsIndexTarget">
		    <td style="min-width:25px;width:25px"><button style="width:100%" onclick="obs_newObsIndexTarget(this)">+</button></td>
		    <td class="fill">
		      <input id="obsObsIndexTargetName" type="text" value="" style="width:100%"/> 
		    </td>
		    <td class="fill">
		      <input id="obsIndexPOS" type="text" value="" style="width:100%"/> 
		      <div id="obsIndexPOSDropdown" class="dropdown-content">
		      </div>
		    </td>
		    <td style="min-width:25px;width:25px"><button style="width:100%" onclick="showDropdown('obsIndexPOS')" class="dropbtn">&#9906</button></td>
		    <td class="fill"><input id="obsIndexDESCR" type="text" value="" style="width:100%"/></td>
		    <td class="fill"><input id="obsIndexInfo" type="text" value="" style="width:100%"/></td>
		    <td class="fill"><input id="obsIndexMin" type="text" value="" style="width:100%"/></td>
		    <td class="fill"><input id="obsIndexMax" type="text" value="" style="width:100%"/></td>
		  </tr>
		</table>
	      </td>
	    </tr>
	    <tr>
	      <td>Observation index target: </td>
	      <td colspan="2">
		<table width="100%" border="0" id="obsIndexTable">
		  <tr>
		    <td class="fill">
		      <input  style="color:green" id="obsIndexTarget" type="text" value="" style="width:100%" onblur="obs_setArray('indexTarget',this.value)"/> 
		    </td>
		    <td align="right">Expression:</td>
		    <td class="fill">
		      <input id="obsIndexExp" type="text" value="" style="width:100%" onblur="obs_setArray('indexExp',this.value)"/> 
		      <div id="obsIndexExpDropdown" class="dropdown-content"></div>
		    </td>
		    <td style="min-width:25px;width:25px"><button onclick="showDropdown('obsIndexExp')" class="dropbtn">&#9906</button></td>
		  </tr>
		</table>
	      </td>
	    </tr>
	  </table>
	  <table style="width:100%">
	    <tr>
	      <td align="right">Password:<input type="password" id="obsConfigFilePsw" value="">
		<button onclick="obs_saveConfigFile()">Save</button></td>
	    </tr>
	  </table>
	</div>
	<div id="scan" class="tab-pane fade in">
	  <table style="width:100%">
	    <tr style="background:#09C;">
	      <td>
		<div id="farkheader">
		  <button style="width:100%" class="request" onclick="scan_updateData()" title="Re-load from server."><h1>Auto index setup</h1></button>
		</div>
	      </td>
	    </tr>
	  </table>
	  <table id="scanTable"  width="100%" border="1">
	    <tr id="labelsScanModel" style="background-color:#00b9f2"> 
	      <td style="min-width:25px;width:25px"></td>
	      <td><bf>Model index setup file</bf></td>
	      <td style="min-width:25px;width:25px"></td>
	      <td width="200px"><bf>Last scan</bf></td>
	      <td width="200px"><bf>Last used</bf></td><td style="min-width:25px;width:25px"></td>
	    </tr>
	    <tr id="newlineScanModel">
	      <td style="min-width:25px;width:25px"><button style="width:100%" onclick="scan_newModelConfigFile(this)">+</button></td>
	      <td class="fill">
		<input id="scanModelConfigFile" type="text" value="" style="width:100%" disabled/> 
		<div id="scanModelConfigFileDropdown" class="dropdown-content">
		</div>
	      </td>
	      <td style="min-width:25px;width:25px"><button style="width:100%" onclick="showDropdown('scanModelConfigFile')" class="dropbtn">&#9906</button></td>
	      <td id="scanModelLastScan"></td>
	      <td id="scanModelLastUsed"></td>
	      <td style="min-width:25px;width:25px"><button onclick="scan_scanNow(this.parentNode.parentNode,'model',this.parentNode.parentNode.children[1].children[0].value)">Scan now</button></td>
	    </tr>
	    <tr id="labelsScanObs" style="background-color:#00b9f2"> 
	      <td style="min-width:25px;width:25px"></td>
	      <td><bf>Observation index setup file</bf></td>
	      <td style="min-width:25px;width:25px"></td>
	      <td><bf>last scan</bf></td>
	      <td><bf>last used</bf></td>
	      <td style="min-width:25px;width:25px"></td>
	    </tr>
	    <tr id="newlineScanObs">
	      <td style="min-width:25px;width:25px"><button style="width:100%" onclick="scan_newObsConfigFile(this)">+</button></td>
	      <td class="fill">
		<input id="scanObsConfigFile" type="text" value="" style="width:100%" disabled/> 
		<div id="scanObsConfigFileDropdown" class="dropdown-content">
		</div>
	      </td>
	      <td style="min-width:25px;width:25px"><button style="width:100%" onclick="showDropdown('scanObsConfigFile')" class="dropbtn">&#9906</button></td>
	      <td id="scanObsLastScan"></td>
	      <td id="scanObsLastUsed"></td>
	      <td style="min-width:25px;width:25px"><button onclick="scan_scanNow(this.parentNode.parentNode,'obs',this.parentNode.parentNode.children[1].children[0].value)">Scan now</button></td>
	    </tr>
	  </table>
	  <table width="100%">
	    <tr>
	      <td align="right">Password:<input type="password" id="scanConfigFilePsw" value="">
		<button onclick="scan_saveConfig('scanConfigFilePsw')">Save</button></td>
	    </tr>
	  </table>
	</div>
	<div id="coloc" class="tab-pane fade in">
	  <table style="width:100%">
	    <tr style="background:#09C;">
	      <td>
		<div id="farkheader">
		  <button style="width:100%" class="request" onclick="coloc_updateData()" title="Re-load from server."><h1>Colocate</h1></button>
		</div>
	      </td>
	    </tr>
	  </table>
	  <table style="width:100%">
	    <tr>
	      <td style="white-space: nowrap;"><em>Colocation setup file:</em></td>
	      <td class="fill" width="100%">
		<input id="colocConfigFile" type="text" value="" style="width:100%" onblur="coloc_setConfigFile(this.value);coloc_show()"/> 
		<div id="colocConfigFileDropdown" class="dropdown-content">
		</div>
	      </td>
	      <td style="min-width:25px;width:25px"><button onclick="showDropdown('colocConfigFile')" class="dropbtn">&#9906</button></td>
	    </tr>
	    <tr>
	      <td>Model index setup file:</td>
	      <td class="fill" width="100%">
		<input id="colocModelConfigFile" type="text" value="" style="width:100%" disabled /> 
		<div id="colocModelConfigFileDropdown" class="dropdown-content">
		</div>
	      </td>
	      <td style="min-width:25px;width:25px"><button onclick="showDropdown('colocModelConfigFile')" class="dropbtn">&#9906</button></td>
	    </tr>
	    <tr>
	      <td>Observation index setup file:</td>
	      <td width="100% class="fill""><input id="colocObsConfigFile" type="text" value="" style="width:100%"disabled/> 
		<div id="colocObsConfigFileDropdown" class="dropdown-content">
		</div>
	      </td>
	      <td style="min-width:25px;width:25px"><button onclick="showDropdown('colocObsConfigFile')" class="dropbtn">&#9906</button></td>
	    </tr>
	  </table>
	  <table width="100%">
	    <tr id="displayModelTargets" style="display:none"><td valign="top">Model targets:</td>
	      <td><table width="100%" border="1" id="modelTargetTable">
		  <tr style="background-color:#00b9f2" id="labelsModelTarget"> 
		    <td style="min-width:25px;width:25px"></td>
		    <td><bf>Model target</bf></td>
		    <td><bf>Model variable/(dimension)</bf></td>
		    <td style="min-width:25px;width:25px"></td>
		    <td width="150px"><bf>Minimum</bf></td>
		    <td width="150px"><bf>Maximum</bf></td>
		  </tr>
		  <tr id="newlineModelTarget">
		    <td style="min-width:25px;width:25px"><button style="width:100%" onclick="coloc_newModelTarget(this)">+</button></td>
		    <td class="fill"><input id="colocModelTargetName" type="text" value="" style="width:100%;display:block"/> </td>
		    <td class="fill"><input id="colocModelTargetVariable" type="text" value="" style="width:100%"/><div id="colocModelTargetVariableDropdown" class="dropdown-content">
		      </div>
		    </td>
		    <td><button style="width:100%" onclick="showDropdown('colocModelTargetVariable')" class="dropbtn">&#9906</button></td>
		    <td class="fill">
		      <input id="colocModelTargetMin" type="text" value="" style="width:100%" onblur="this.value=this.value.replace(/[^\d\.]/g,'')"/>
		    </td>
		    <td class="fill">
		      <input id="colocModelTargetMax" type="text" value="" style="width:100%" onblur="this.value=this.value.replace(/[^\d\.]/g,'')"/>
		    </td>
		  </tr>
		</table>
	    </td></tr>
	    <tr id="displayModelDefault" style="display:none"><td valign="top">Default:</td>
	      <td>
		<table width="100%" border="1" id="modelDefaultTable">
		  <tr style="background-color:#00b9f2" id="labelsModelDefault"> 
		    <td style="min-width:25px;width:25px"></td>
		    <td><bf>Latitude</bf></td>
		    <td><bf>Longitude</bf></td>
		    <td><bf>Information</bf></td>
		  </tr>
		  <tr id="newlineModelDefault">
		    <td style="min-width:25px;width:25px"><button style="width:100%" onclick="coloc_newModelDefault(this)">+</button></td>
		    <td class="fill" id="_latitude">
		      <input type="text" value="" style="width:100%" onblur="this.value=this.value.replace(/[^\d\.]/g,'')"/>
		    </td>
		    <td class="fill" id="_longitude">
		      <input type="text" value="" style="width:100%" onblur="this.value=this.value.replace(/[^\d\.]/g,'')"/>
		    </td>
		    <td class="fill" id="information">
		      <input type="text" value="" style="width:100%"/>
		    </td>
		  </tr>
		</table>
	      </td>
	    </tr>
	    <tr id="displayObsTargets" style="display:none"><td valign="top">Observation targets:</td>
	      <td>
		<table width="100%" border="1" id="obsTargetTable">
		  <tr style="background-color:#00b9f2" id="labelsObsTarget"> 
		    <td style="min-width:25px;width:25px"></td>
		    <td><bf>Observation target</bf></td>
		    <td width="150px"><bf>Position</bf></td>
		    <td style="min-width:25px;width:25px"></td>
		    <td width="150px"><bf>Descriptor</bf></td>
		    <td width="150px"><bf>Info</bf></td>
		    <td width="150px"><bf>Minimum</bf></td>
		    <td width="150px"><bf>Maximum</bf></td>
		  </tr>
		  <tr id="newlineObsTarget">
		    <td style="min-width:25px;width:25px"><button style="width:100%" onclick="coloc_newObsTarget(this)">+</button></td>
		    <td class="fill">
		      <input id="colocObsTargetName" type="text" value="" style="width:100%"/> 
		    </td>
		    <td class="fill">
		      <input id="colocObsPOS" type="text" value="" style="width:100%"/> 
		      <div id="colocObsPOSDropdown" class="dropdown-content">
		      </div>
		    </td>
		    <td style="min-width:25px;width:25px"><button style="width:100%" onclick="showDropdown('colocObsPOS')" class="dropbtn">&#9906</button></td>
		    <td class="fill"><input id="colocObsDESCR" type="text" value="" style="width:100%"/></td>
		    <td class="fill"><input id="colocObsInfo" type="text" value="" style="width:100%"/></td>
		    <td class="fill"><input id="colocObsMin" type="text" value="" style="width:100%"/></td>
		    <td class="fill"><input id="colocObsMax" type="text" value="" style="width:100%"/></td>
		  </tr>
		</table>
	    </td></tr>
	    <tr id="displayMatchRules" style="display:none"><td valign="top">Match rules:</td>
	      <td>
		<table width="100%" border="1" id="targetMatchTable">
		  <tr id="labelsTargetMatch" style="background-color:#00b9f2"> 
		    <td><bf>Model target</bf></td>
		    <td><bf>Observation target expression</bf></td>
		    <td style="min-width:25px;width:25px"></td>
		  </tr>
		  <tr id="newlineTargetMatch" style="display:none"/> 
		</table>
	    </td></tr>
	    <tr id="colocDebugExpression">
	      <td>Debug expression:</td>
	      <td> 
		<table width="100%" border="1" id="debugExpression"> <tr>
		    <td class="fill"><input id="colocDebugExp" value="">
		      <div id="colocDebugExpDropdown" class="dropdown-content">
		    </td>
		    <td style="min-width:25px;width:25px"><button style="width:100%" onclick="showDropdown('colocDebugExp')" class="dropbtn">&#9906</button></td>
		    <td style="min-width:25px;width:25px"><button style="width:100%" onclick="coloc_debugExp('colocDebugExp','colocDebugRes')">&#8594</button></td>
		    <td width="20%" id="colocDebugRes">0</td>
		</tr></table>
	      </td>
	    </tr>
	  </table>
	  <table width="100%">
	    <tr>
	      <td align="right">Password:<input type="password" id="colocConfigFilePsw" value="">
		<button onclick="coloc_saveConfigFile('colocConfigFilePsw')">Save</button></td>
	    </tr>
	  </table>
	  <table style="width:100%">
	    <tr>
	      <td id="farkcoloc">
		<h5><a id="colocLink" href="http://cgi-bin/fark_coloc.pl" title="Colocate model and observation data.">http://cgi-bin/fark_coloc.pl</a></h5> 
	      </td>
	    </tr>
	  </table>
	</div>
      </div>
      <table style="width:100%">
	<tr>
	  <td>
	    <div id="farkfooter">
	      <small>File ARchive Kit - alpha release</small> 
	    </div>
	  </td>
	</tr>
      </table>
      <div id="log"></div>
    </div>
    <script src="js/model.js"></script>
    <script src="js/obs.js"></script>
    <script src="js/scan.js"></script>
    <script src="js/coloc.js"></script>
    <script src="js/fark.js"></script>
  </body>
</html>
